<%
function layoutDiv() {
    var el = '';
    if (!item.content?.length) {
        el += '<widget class="widget-wrapper markdown">';
        if (item.title?.length > 0) {
            el += '<div class="widget-header cap theme dis-select">';
            el += '<span class="name">' + item.title + '</span>';
            el += '</div>';
        }
        el += '<div class="widget-body fs14">';
        el += '<p id="hitokoto">:D 获取中...</p>';
        el += '</div>';
        el += '</widget>';
    } else {
        el += '<widget class="widget-wrapper markdown">';
        if (item.title?.length > 0) {
            el += '<div class="widget-header cap theme dis-select">';
            el += '<span class="name">' + item.title + '</span>';
            el += '</div>';
        }
        el += '<div class="widget-body fs14">';
        el += markdown(item.content);
        el += '<hr>'
        el += '<p id="hitokoto">:D 获取中...</p>';
        el += '</div>';
        el += '</widget>';
    }


    return el;
}
%>
<%- layoutDiv() %>

<!-- 一言API -->
<!-- 现代写法，推荐 -->
<!-- 兼容低版本浏览器 (包括 IE)，可移除 -->
<script src="https://cdn.jsdelivr.net/npm/bluebird@3/js/browser/bluebird.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/whatwg-fetch@2.0.3/fetch.min.js"></script>
<!--End-->
<script>
    fetch('https://v1.hitokoto.cn')
        .then(function (res){
            return res.json();
        })
        .then(function (data) {
            var hitokoto = document.getElementById('hitokoto');
            hitokoto.innerText = '«' + data.from + '»' + data.hitokoto;
        })
        .catch(function (err) {
            console.error(err);
        })
</script>
